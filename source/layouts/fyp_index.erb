<!doctype html>
<html>
  <head>
    <%= favicon_tag 'favicon.ico' %>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>毕业设计-郑俊安</title>

    <style>
    </style>
    <%= stylesheet_link_tag :screen, media: :screen %>
    <%= stylesheet_link_tag :print, media: :print %>
  </head>

  <body> 
    <%= partial "/layouts/_header.erb" %>
    <div style="margin-top:100px;margin-right:25%; margin-left: 25%">

    <p>这里的首页展示的是一个日历图，将其定制为对应展柜异常发生数的图表，</p>
    <p>纵坐标代表展区编号、横坐标代表展柜编号，图表格子显示的数字代表该展柜微环境异常发生次数。</p>

    </div>
    <div id="container5" style="width:50%; height: 90%; margin-right:25%; margin-left: 25%; margin-top:150px"></div>
    
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts/dist/echarts.min.js"></script>
    <script type="text/javascript">
    var dom = document.getElementById("container5");
    var myChart = echarts.init(dom);
    var app = {};
    option = null;
    var hours = ['0', '1', '2', '3', '4', '5', '6',
        '7', '8', '9'];
    var days = ['a', 'b', 'c',
        'd', 'e', 'f', 'g'];
    
    var data = [[0, 0, 5], [0, 1, 1], [0, 2, 0], [0, 3, 0], [0, 4, 0], 
    [0, 5, 2], [0, 6, 3], [0, 7, 1], [0, 8, 0], [0, 9, 0], 
    [1, 0, 0], [1, 1, 1], [1, 2, 0], [1, 3, 0], [1, 4, 0], 
    [1, 5, 0], [1, 6, 0], [1, 7, 1], [1, 8, 4], [1, 9, 0],
    [2, 0, 0], [2, 1, 1], [2, 2, 0], [2, 3, 0], [2, 4, 0], 
    [2, 5, 3], [2, 6, 7], [2, 7, 0], [2, 8, 0], [2, 9, 0],
    [3, 0, 0], [3, 1, 1], [3, 2, 0], [3, 3, 0], [3, 4, 0], 
    [3, 5, 0], [3, 6, 0], [3, 7, 0], [3, 8, 0], [3, 9, 0],
    [4, 0, 1], [4, 1, 7], [4, 2, 0], [4, 3, 0], [4, 4, 0], 
    [4, 5, 0], [4, 6, 0], [4, 7, 0], [4, 8, 5], [4, 9, 0],
    [5, 0, 1], [5, 1, 1], [5, 2, 10], [5, 3, 0], [5, 4, 0], 
    [5, 5, 0], [5, 6, 0], [5, 7, 0], [5, 8, 0], [5, 9, 0],
    [6, 0, 0], [6, 1, 1], [6, 2, 0], [6, 3, 0], [6, 4, 0], 
    [6, 5, 0], [6, 6, 0], [6, 7, 9], [6, 8, 0], [6, 9, 0]];
    
    data = data.map(function (item) {
        return [item[1], item[0], item[2] || '-'];
    });
    
    option = {
        title: {
            text: '展柜区对应异常发生数',
            left: 'center'
        },
        tooltip: {
            position: 'top'
        },
        animation: true,
        grid: {
            height: '20%',
            top: '10%'
        },
        xAxis: {
            type: 'category',
            data: hours,
            splitArea: {
                show: true
            }
        },
        yAxis: {
            type: 'category',
            data: days,
            splitArea: {
                show: true
            }
        },
        visualMap: {
            min: 0,
            max: 10,
            calculable: true,
            orient: 'horizontal',
            left: '10%',
            bottom: 'auto',
            top: 'autp'
        },
        series: [{
            name: 'Punch Card',
            type: 'heatmap',
            data: data,
            label: {
                show: true
            },
            emphasis: {
                itemStyle: {
                    shadowBlur: 10,
                    shadowColor: 'rgba(0, 0, 0, 0.5)'
                }
            }
        }]
    };
    if (option && typeof option === "object") {
        myChart.setOption(option, true);
    }
    </script>

  </body>
</html>
